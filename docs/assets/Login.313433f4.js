import{y as e,q as t,Q as s,Z as n,H as l,S as i,j as a,m as o,U as r,t as d,V as p,n as u,O as c,L as h,W as g,R as m,I as b,J as f,X as y,N as v,f as x,g as w,h as k,r as L,e as S,G as C,Y as I,_ as T,$,k as E,l as V,a0 as P,v as R,x as _,z as B}from"./vendor.a6a68fde.js";import{_ as z,u as M}from"./index.098ebdb6.js";import{u as O}from"./useMessageStore.c7523b7a.js";var H={name:"InputText",emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled(){return null!=this.modelValue&&this.modelValue.toString().length>0}}};H.render=function(s,n,l,i,a,o){return e(),t("input",{class:["p-inputtext p-component",{"p-filled":o.filled}],value:l.modelValue,onInput:n[1]||(n[1]=(...e)=>o.onInput&&o.onInput(...e))},null,42,["value"])};var q=s(),A={name:"Password",emits:["update:modelValue"],inheritAttrs:!1,props:{modelValue:String,promptLabel:{type:String,default:null},mediumRegex:{type:String,default:"^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"},strongRegex:{type:String,default:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})"},weakLabel:{type:String,default:null},mediumLabel:{type:String,default:null},strongLabel:{type:String,default:null},feedback:{type:Boolean,default:!0},appendTo:{type:String,default:"body"},toggleMask:{type:Boolean,default:!1},hideIcon:{type:String,default:"pi pi-eye-slash"},showIcon:{type:String,default:"pi pi-eye"},inputClass:String,inputStyle:null,style:null,class:String,panelClass:String},data:()=>({overlayVisible:!1,meter:null,infoText:null,focused:!1,unmasked:!1}),mediumCheckRegExp:null,strongCheckRegExp:null,resizeListener:null,scrollHandler:null,overlay:null,mounted(){this.infoText=this.promptText,this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex)},beforeUnmount(){this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(n.clear(this.overlay),this.overlay=null)},methods:{onOverlayEnter(e){n.set("overlay",e,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener()},onOverlayLeave(){this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null},onOverlayAfterLeave(e){n.clear(e)},alignOverlay(){this.appendDisabled?l.relativePosition(this.overlay,this.$refs.input.$el):(this.overlay.style.minWidth=l.getOuterWidth(this.$refs.input.$el)+"px",l.absolutePosition(this.overlay,this.$refs.input.$el))},testStrength(e){let t=0;return this.strongCheckRegExp.test(e)?t=3:this.mediumCheckRegExp.test(e)?t=2:e.length&&(t=1),t},onInput(e){this.$emit("update:modelValue",e.target.value)},onFocus(){this.focused=!0,this.feedback&&(this.overlayVisible=!0)},onBlur(){this.focused=!1,this.feedback&&(this.overlayVisible=!1)},onKeyUp(e){if(this.feedback){const t=e.target.value;let s=null,n=null;switch(this.testStrength(t)){case 1:s=this.weakText,n={strength:"weak",width:"33.33%"};break;case 2:s=this.mediumText,n={strength:"medium",width:"66.66%"};break;case 3:s=this.strongText,n={strength:"strong",width:"100%"};break;default:s=this.promptText,n=null}this.meter=n,this.infoText=s,this.overlayVisible||(this.overlayVisible=!0)}},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new i(this.$refs.input.$el,(()=>{this.overlayVisible&&(this.overlayVisible=!1)}))),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef(e){this.overlay=e},onMaskToggle(){this.unmasked=!this.unmasked},onOverlayClick(e){q.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{containerClass(){return["p-password p-component p-inputwrapper",this.class,{"p-inputwrapper-filled":this.filled,"p-inputwrapper-focus":this.focused,"p-input-icon-right":this.toggleMask}]},inputFieldClass(){return["p-password-input",this.inputClass,{"p-disabled":this.$attrs.disabled}]},panelStyleClass(){return["p-password-panel p-component",this.panelClass,{"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]},toggleIconClass(){return this.unmasked?this.hideIcon:this.showIcon},strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`},inputType(){return this.unmasked?"text":"password"},filled(){return null!=this.modelValue&&this.modelValue.toString().length>0},weakText(){return this.weakLabel||this.$primevue.config.locale.weak},mediumText(){return this.mediumLabel||this.$primevue.config.locale.medium},strongText(){return this.strongLabel||this.$primevue.config.locale.strong},promptText(){return this.promptLabel||this.$primevue.config.locale.passwordPrompt},appendDisabled(){return"self"===this.appendTo},appendTarget(){return this.appendDisabled?null:this.appendTo}},components:{PInputText:H}};const D={class:"p-password-meter"},U={class:"p-password-info"};!function(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===s&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("\n.p-password {\n    position: relative;\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-password-panel {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-password .p-password-panel {\n    min-width: 100%;\n}\n.p-password-meter {\n    height: 10px;\n}\n.p-password-strength {\n    height: 100%;\n    width: 0;\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-fluid .p-password {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n"),A.render=function(s,n,l,i,m,b){const f=a("PInputText");return e(),t("div",{class:b.containerClass,style:l.style},[o(f,r({ref:"input",class:b.inputFieldClass,style:l.inputStyle,type:b.inputType,value:l.modelValue,onInput:b.onInput,onFocus:b.onFocus,onBlur:b.onBlur,onKeyup:b.onKeyUp},s.$attrs),null,16,["class","style","type","value","onInput","onFocus","onBlur","onKeyup"]),l.toggleMask?(e(),t("i",{key:0,class:b.toggleIconClass,onClick:n[1]||(n[1]=(...e)=>b.onMaskToggle&&b.onMaskToggle(...e))},null,2)):d("",!0),(e(),t(p,{to:b.appendTarget,disabled:b.appendDisabled},[o(g,{name:"p-connected-overlay",onEnter:b.onOverlayEnter,onLeave:b.onOverlayLeave,onAfterLeave:b.onOverlayAfterLeave},{default:u((()=>[m.overlayVisible?(e(),t("div",{key:0,ref:b.overlayRef,class:b.panelStyleClass,onClick:n[2]||(n[2]=(...e)=>b.onOverlayClick&&b.onOverlayClick(...e))},[c(s.$slots,"header"),c(s.$slots,"content",{},(()=>[o("div",D,[o("div",{class:b.strengthClass,style:{width:m.meter?m.meter.width:""}},null,6)]),o("div",U,h(m.infoText),1)])),c(s.$slots,"footer")],2)):d("",!0)])),_:3},8,["onEnter","onLeave","onAfterLeave"])],8,["to","disabled"]))],6)};var j={name:"Button",props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},computed:{buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label}},iconClass(){return[this.loading?"p-button-loading-icon "+this.loadingIcon:this.icon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&1===String(this.badge).length}]},disabled(){return this.$attrs.disabled||this.loading}},directives:{ripple:m}};const F={class:"p-button-label"};j.render=function(s,n,l,i,a,r){const p=b("ripple");return f((e(),t("button",{class:r.buttonClass,type:"button",disabled:r.disabled},[c(s.$slots,"default",{},(()=>[l.loading&&!l.icon?(e(),t("span",{key:0,class:r.iconClass},null,2)):d("",!0),l.icon?(e(),t("span",{key:1,class:r.iconClass},null,2)):d("",!0),o("span",F,h(l.label||" "),1),l.badge?(e(),t("span",{key:2,class:r.badgeStyleClass},h(l.badge),3)):d("",!0)]))],10,["disabled"])),[[p]])};var N={name:"Panel",emits:["update:collapsed","toggle"],props:{header:String,toggleable:Boolean,collapsed:Boolean},data(){return{d_collapsed:this.collapsed}},watch:{collapsed(e){this.d_collapsed=e}},methods:{toggle(e){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:e,value:this.d_collapsed})}},computed:{ariaId:()=>y(),containerClass(){return["p-panel p-component",{"p-panel-toggleable":this.toggleable}]}},directives:{ripple:m}};const K={class:"p-panel-header"},Z={class:"p-panel-icons"},W={class:"p-panel-content"};!function(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===s&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("\n.p-panel-header {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-panel-title {\n    line-height: 1;\n}\n.p-panel-header-icon {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    cursor: pointer;\n    text-decoration: none;\n    overflow: hidden;\n    position: relative;\n}\n"),N.render=function(s,n,l,i,a,r){const p=b("ripple");return e(),t("div",{class:r.containerClass},[o("div",K,[c(s.$slots,"header",{},(()=>[l.header?(e(),t("span",{key:0,class:"p-panel-title",id:r.ariaId+"_header"},h(l.header),9,["id"])):d("",!0)])),o("div",Z,[c(s.$slots,"icons"),l.toggleable?f((e(),t("button",{key:0,class:"p-panel-header-icon p-panel-toggler p-link",onClick:n[1]||(n[1]=(...e)=>r.toggle&&r.toggle(...e)),type:"button",id:r.ariaId+"_header","aria-controls":r.ariaId+"_content","aria-expanded":!a.d_collapsed},[o("span",{class:{"pi pi-minus":!a.d_collapsed,"pi pi-plus":a.d_collapsed}},null,2)],8,["id","aria-controls","aria-expanded"])),[[p]]):d("",!0)])]),o(g,{name:"p-toggleable-content"},{default:u((()=>[f(o("div",{class:"p-toggleable-content",role:"region",id:r.ariaId+"_content","aria-labelledby":r.ariaId+"_header"},[o("div",W,[c(s.$slots,"default")])],8,["id","aria-labelledby"]),[[v,!a.d_collapsed]])])),_:3})],2)};const G=x({components:{InputText:H,Password:A,Button:j,Panel:N},setup(){const e=w(),t=k(),{userId:s,password:n,isLoginProcessing:l,isLoginUserError:i,login:a,resetLoginUserErrorStatus:o}=M(),{requireLoginMessage:r,loginErrorMessage:d}=O(),p=L(),u=L(),c=S((()=>"true"===t.query.message)),h=S((()=>!s.value||!n.value)),g=()=>{var e,t;null==(t=null==(e=null==u?void 0:u.value)?void 0:e.$el)||t.focus()},m=()=>{var e,t;null==(t=null==(e=null==u?void 0:u.value)?void 0:e.$el)||t.blur()};return C({title:"Login | test automation exercise site"}),I((()=>{T((()=>{var e,t;null==(t=null==(e=null==p?void 0:p.value)?void 0:e.$el)||t.focus()}))})),$((()=>{o()})),{userId:s,password:n,isLoginProcessing:l,isLoginRequired:c,isLoginButtonDisabled:h,isLoginUserError:i,requireLoginMessage:r,loginErrorMessage:d,doLogin:async()=>{if(g(),await a()){const s=t.query.redirect||"/todo";e.push(String(s))}m()},userIdInputElement:p,loginButtonElement:u}}}),J=e=>(R("data-v-3a86525e"),e=e(),_(),e),Q={class:"page-base",id:"login-page"},X={role:"main"},Y=J((()=>V("h1",{class:"title is-4"},[V("span",{class:"icon pi pi-user"}),B("ログイン ")],-1))),ee={key:0,class:"info-message",id:"require-message"},te={class:"p-field"},se=J((()=>V("label",{for:"user-id-input"},"ユーザーID",-1))),ne={class:"p-field"},le=J((()=>V("label",{for:"password-input"},"パスワード",-1))),ie=["innerHTML"],ae=J((()=>V("p",null,[B("このログイン画面はテスト用のダミーです。以下のユーザー情報でログインできます。"),V("br"),B(" ユーザーID : testID"),V("br"),B(" パスワード : testPASS")],-1)));var oe=z(G,[["render",function(t,s,n,l,i,r){const p=a("InputText"),c=a("Password"),g=a("Button"),m=a("Panel");return e(),E("div",Q,[V("section",X,[Y,t.isLoginRequired?(e(),E("p",ee,h(t.requireLoginMessage),1)):d("",!0),V("form",{class:"login-form",onSubmit:s[2]||(s[2]=P((e=>t.doLogin()),["prevent"]))},[V("div",te,[se,o(p,{id:"user-id-input",ref:"userIdInputElement",name:"id-field",type:"text",required:"",autofocus:"",placeholder:"ユーザーIDを入力してください",modelValue:t.userId,"onUpdate:modelValue":s[0]||(s[0]=e=>t.userId=e)},null,8,["modelValue"])]),V("div",ne,[le,o(c,{id:"password-input",name:"pw-field",required:"",placeholder:"パスワードを入力してください",feedback:!1,toggleMask:"",modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.password=e)},null,8,["modelValue"])]),o(g,{class:"p-button-outlined",id:"login-submit",ref:"loginButtonElement",name:"login-btn",type:"submit",disabled:t.isLoginButtonDisabled,loading:t.isLoginProcessing,label:"ログイン"},null,8,["disabled","loading"])],32),t.isLoginUserError?(e(),E("p",{key:1,class:"error-message has-text-danger",innerHTML:t.loginErrorMessage},null,8,ie)):d("",!0),o(m,{header:"Info"},{default:u((()=>[ae])),_:1})])])}],["__scopeId","data-v-3a86525e"]]);export{oe as default};
